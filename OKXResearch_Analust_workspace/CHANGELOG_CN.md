# 变更日志 (CHANGELOG)

本项目的所有重大变更都将记录在此文件中。

## [0.3.0] - 2025-12-25

### ✨ 新特性
*   **📰 全维情报系统**: 新增 `src/api/news_client.py`，接入 CryptoPanic 新闻聚合源。
    *   **智能筛选**: 默认优先抓取“重大(Important)”新闻，无重大事件时自动降级抓取“热门(Hot)”新闻，保证不空窗。
    *   **AI 深度验证**: DeepSeek-R1 不再复读新闻，而是进行逻辑推演（如：MicroStrategy买币 -> 流通减少 -> 长期利好），并结合盘面判断“背离”。
    *   **结构化展示**: 研报新增【新闻情报区】，以 Markdown 表格形式直观展示“多空信号”、“新闻标题”及“底层逻辑”。
*   **🛡️ 启动健壮性**:
    *   升级 `run.sh`，新增 **进程冲突检测**（防止重复启动）和 **缓存自动清理**（彻底解决 Import 报错）。

### 🔧 重构与修复
*   **代码精简**: 移除了实验性的“模拟交易(Paper Trading)”模块，使项目回归纯粹的投研分析定位。
*   **Bug 修复**: 修复了 `main.py` 中的缩进错误，以及新闻表格因换行符/管道符导致的渲染崩坏问题。

## [0.2.0] - 2025-12-22

### ✨ 新特性
*   **🤖 模拟盘回测系统**: 新增全自动模拟交易模块 (`src/analysis/paper_trader.py`)。
    *   **虚拟账户**: 管理 10,000 USDT 初始资金，数据持久化存储于 `data/paper_trading.json`。
    *   **AI 交易决策**: AI 基于研报和当前持仓，自动生成买卖指令 (BUY/SELL/HOLD)。
    *   **业绩追踪**: 每次通知自动附带模拟盘周报（总资产、收益率）。
*   **📉 资金费率分析**:
    *   `OKXClient` 新增 `get_funding_rates()` 接口，实时抓取主流币（BTC, ETH 等）的资金费率。
    *   更新了 AI Prompt，使其能根据费率正负值判断市场多空拥挤度。

### 📚 文档
*   **Git 指南**: 新增 `docs/GIT_GUIDE.md`，规范版本控制流程。
*   **README 更新**: 将 `README.md` 移至项目根目录，并新增“支持与贡献”板块。

## [0.1.0] - 2025-12-20

### ✨ 新特性
*   **DeepSeek-R1 集成**: 将 `.env` 中的默认模型更新为 `deepseek-reasoner`，启用 AI 的深度思维链推理能力。
*   **启动画面**: 在 `src/main.py` 中新增了基于 Rich 的终端欢迎面板，显示版本号、作者及启动时间。
*   **立即执行**: 优化了调度器逻辑，程序启动后会立即执行一次分析任务，无需等待第一个定时周期。

### 🎨 体验优化
*   **移动端通知适配**:
    *   重构了 `src/utils/notifier.py` 中的飞书/钉钉通知逻辑。
    *   将 Markdown 宽表格自动转换为垂直的 **列表视图**，解决了手机端阅读需要左右滑动的问题。
    *   增加了视觉分割线和底部机器署名。
*   **纯净日志**:
    *   `src/utils/logger.py`: 简化控制台输出，移除了冗余的时间戳（文件日志中依然保留完整信息）。
    *   启动脚本 (`run.bat`, `run.sh`) 中的 `pip install` 调整为静默模式，减少刷屏。
    *   将 API 请求和 LLM 初始化等啰嗦日志的级别从 `INFO` 降级为 `DEBUG`。

### 🐛 修复与工程
*   **虚拟环境逻辑**: 
    *   `run.sh` 现在能智能检测当前环境（如 Conda），如果已在环境中则跳过创建 `okx_research` 环境。
    *   修复了脚本退出时错误执行 `deactivate` 的问题。
*   **依赖管理**: 将 `requirements.txt` 从 `src/` 移至项目根目录，并移除了未使用的 `openai` 库。
*   **Git 配置**: 在 `.gitignore` 中忽略了本地生成的 `okx_research/` 虚拟环境目录。

### 📚 文档
*   **许可证**: 正式采用 **CC BY-NC-SA 4.0** (署名-非商业性使用-相同方式共享) 协议。
*   **README 重构**: 全面更新文档，强调核心价值，优化“快速开始”流程，更新目录结构图，并移除了冗余的徽章。
